<Page
    x:Class="QBDrumMap.Views.SettingPage"
    Style="{DynamicResource MahApps.Styles.Page}"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:Dialog="clr-namespace:MahApps.Metro.Controls.Dialogs;assembly=MahApps.Metro"
    xmlns:mah="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
    xmlns:behaviors="clr-namespace:libQB.Behaviors;assembly=libQB"
    xmlns:reslibQB="clr-namespace:libQB.Properties;assembly=libQB"
    xmlns:resLocal="clr-namespace:QBDrumMap.Properties"
    Dialog:DialogParticipation.Register="{Binding}"
    mc:Ignorable="d" d:Background="Black"
    d:DesignHeight="1000" d:DesignWidth="1200">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="48"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <StackPanel Grid.Row="0" Margin="{StaticResource MediumLeftMargin}" VerticalAlignment="Center" Orientation="Horizontal">
            <ContentControl IsTabStop="False" Content="{StaticResource SettingPageIcon}" Margin="8,2,0,0"/>
            <TextBlock Style="{StaticResource PageTitleStyle}" Text="{x:Static reslibQB:Resources.Setting_PageTitle}"/>
        </StackPanel>

        <ScrollViewer Grid.Row="1"  Margin="{StaticResource MediumLeftRightMargin}">
            <ScrollViewer.Resources>
                <Style TargetType="Label">
                    <Setter Property="Width" Value="240"/>
                </Style>
                <Style TargetType="CheckBox">
                    <Setter Property="Margin" Value="6"/>
                    <Setter Property="VerticalAlignment" Value="Center"/>
                </Style>
                <Style TargetType="TextBox" BasedOn="{StaticResource MahApps.Styles.TextBox}">
                    <Setter Property="mah:TextBoxHelper.SelectAllOnFocus" Value="True"/>
                </Style>
            </ScrollViewer.Resources>
            <StackPanel>
                <GroupBox Header="Theme" Style="{StaticResource GroupBoxBaseStyle}">
                    <DockPanel Margin="8" HorizontalAlignment="Center">
                        <StackPanel Orientation="Horizontal">
                            <RadioButton Margin="4" Width="80" Content="Light" IsChecked="{Binding Setting.BaseTheme, ConverterParameter=Light, Converter={StaticResource BaseThemeConverter}}"/>
                            <RadioButton Margin="4" Width="80" Content="Dark" IsChecked="{Binding Setting.BaseTheme, ConverterParameter=Dark, Converter={StaticResource BaseThemeConverter}}"/>
                        </StackPanel>
                        <DockPanel>
                            <Label Width="80" VerticalContentAlignment="Center" HorizontalContentAlignment="Center" Content="{x:Static reslibQB:Resources.Setting_AccentColor}"/>
                            <ComboBox HorizontalAlignment="Left" Width="140" SelectedValue="{Binding Setting.ThemeColor}" ItemsSource="{Binding AccentColors}" SelectedValuePath="Key">
                                <ComboBox.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <mah:Tile Width="12" Height="12" Background="{Binding Value}"/>
                                            <TextBlock Text="{Binding Key}"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </ComboBox.ItemTemplate>
                            </ComboBox>
                        </DockPanel>
                        <DockPanel>
                            <Label Width="80" VerticalContentAlignment="Center" HorizontalContentAlignment="Center" Content="{x:Static reslibQB:Resources.Setting_Language}"/>
                            <ComboBox Width="120" SelectedValue="{Binding Setting.Language}" ItemsSource="{Binding Source={StaticResource LanguagesComboSource}}"/>
                        </DockPanel>
                    </DockPanel>
                </GroupBox>
                <GroupBox Header="Global" Style="{StaticResource GroupBoxBaseStyle}">
                    <StackPanel>
                        <DockPanel>
                            <Label Content="{x:Static reslibQB:Resources.Setting_SatartUpPage}"/>
                            <ComboBox
                                HorizontalAlignment="Left" Width="140"
                                SelectedValue="{Binding Setting.StartUpPage}" ItemsSource="{Binding Source={StaticResource PagesComboSource}}"/>
                            <CheckBox Margin="12,4,4,4" Content="{x:Static resLocal:Resources.Setting_IsOpenTheLastFileOpened}" IsChecked="{Binding Setting.IsOpenTheLastFileOpened}"/>
                        </DockPanel>
                        <DockPanel>
                            <Label Content="{x:Static resLocal:Resources.Setting_CubaseInstallPath}"/>
                            <TextBox
                                Style="{DynamicResource MahApps.Styles.TextBox.Search}"
                                Text="{Binding Setting.CubaseInstallPath}" MaxLength="256"  
                                mah:TextBoxHelper.SelectAllOnFocus="True"
                                mah:TextBoxHelper.ButtonCommand="{Binding SelectCubaseInstallPathCommand}">
                            </TextBox>
                        </DockPanel>
                    </StackPanel>
                </GroupBox>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Page>
